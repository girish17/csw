<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_111) on Sat Dec 03 22:50:03 CET 2016 -->
<title>javacsw.services.events</title>
<meta name="date" content="2016-12-03">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="javacsw.services.events";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../javacsw/services/event_old/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../javacsw/services/loc/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?javacsw/services/events/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;javacsw.services.events</h1>
<div class="docSummary">
<div class="block">Java API for the Event Service.</div>
</div>
<p>See:&nbsp;<a href="#package.description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../javacsw/services/events/IBlockingTelemetryService.html" title="interface in javacsw.services.events">IBlockingTelemetryService</a></td>
<td class="colLast">
<div class="block">Synchronous/blocking Java API for the telemetry service</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../javacsw/services/events/IBlockingTelemetryService.TelemetryHandler.html" title="interface in javacsw.services.events">IBlockingTelemetryService.TelemetryHandler</a></td>
<td class="colLast">
<div class="block">API to handle a telemetry event (StatusEvent) from the telemetry service</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../javacsw/services/events/IEventService.html" title="interface in javacsw.services.events">IEventService</a></td>
<td class="colLast">
<div class="block">A Java interface for a non-blocking key / value store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../javacsw/services/events/IEventService.EventHandler.html" title="interface in javacsw.services.events">IEventService.EventHandler</a></td>
<td class="colLast">
<div class="block">API to handle an event from the event service</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../javacsw/services/events/IEventServiceAdmin.html" title="interface in javacsw.services.events">IEventServiceAdmin</a></td>
<td class="colLast">
<div class="block">Java admin API for the event service.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../javacsw/services/events/ITelemetryService.html" title="interface in javacsw.services.events">ITelemetryService</a></td>
<td class="colLast">
<div class="block">Java API for the telemetry service</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../javacsw/services/events/ITelemetryService.TelemetryHandler.html" title="interface in javacsw.services.events">ITelemetryService.TelemetryHandler</a></td>
<td class="colLast">
<div class="block">API to handle a telemetry event (StatusEvent) from the telemetry service</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../javacsw/services/events/ITelemetryServiceAdmin.html" title="interface in javacsw.services.events">ITelemetryServiceAdmin</a></td>
<td class="colLast">
<div class="block">Java admin API for the telemetry service.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../javacsw/services/events/JBlockingTelemetryService.html" title="class in javacsw.services.events">JBlockingTelemetryService</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../javacsw/services/events/JBlockingTelemetryService$.html" title="class in javacsw.services.events">JBlockingTelemetryService$</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../javacsw/services/events/JEventService.html" title="class in javacsw.services.events">JEventService</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../javacsw/services/events/JEventService$.html" title="class in javacsw.services.events">JEventService$</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../javacsw/services/events/JEventServiceAdmin.html" title="class in javacsw.services.events">JEventServiceAdmin</a></td>
<td class="colLast">
<div class="block">Implements the java admin API for Event Service</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../javacsw/services/events/JEventServiceAdmin$.html" title="class in javacsw.services.events">JEventServiceAdmin$</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../javacsw/services/events/JTelemetryService.html" title="class in javacsw.services.events">JTelemetryService</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../javacsw/services/events/JTelemetryService$.html" title="class in javacsw.services.events">JTelemetryService$</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../javacsw/services/events/JTelemetryServiceAdmin.html" title="class in javacsw.services.events">JTelemetryServiceAdmin</a></td>
<td class="colLast">
<div class="block">Implements the java admin API for Telemetry Service</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../javacsw/services/events/JTelemetryServiceAdmin$.html" title="class in javacsw.services.events">JTelemetryServiceAdmin$</a></td>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="Package javacsw.services.events Description">Package javacsw.services.events Description</h2>
<div class="block">Java API for the Event Service.
 <p>
  For the Scala API see <a href="../../../csw/services/events/EventService.html" title="interface in csw.services.events"><code>EventService</code></a>.
 <p>
  This module implements an Event Service based on <a href="http://redis.io/">Redis</a>.
  An event can be published and subscribers can receive the events.
  The last n events are always saved for reference (where n is an optional argument).
 <p>
  Note that the tests assume the redis server is running. The host and port for the Redis instance can be configured
  in the application config file (reference.conf, application.conf), or you can use the
  trackLocation application to register a
  Redis instance with the location service and then look up the host and port to use for it.
 <p>
  The <a href="../../../javacsw/services/events/IEventService.html" title="interface in javacsw.services.events"><code>IEventService</code></a> interface also provides factory
  methods to create an event service instance, but provides a non-blocking API based on futures.
 <p>
  <strong>Example Event Publisher (blocking)</strong>
 <p>
  The example below creates an event (event1), publishes it, then gets the latest event from the event service
  and compares it to the original event:
 <p>
 <pre> <code>
  String prefix1 = "tcs.test1";
  StatusEvent event1 = StatusEvent(prefix1)
  .add(jset(infoValue, 1))
  .add(jset(infoStr, "info 1"));

  eventService.publish(event1);
  StatusEvent event = (StatusEvent) eventService.get(prefix1).get();
  assertEquals(event.prefix(), prefix1);
  assertEquals(event.get(infoValue).get().head(), 1);
  assertEquals(event.get(infoStr).get().head(), "info 1");
 </code> </pre>
 <p>
  <strong>Example Event Subscriber (callback method)</strong>
 <p>
  The EventService.subscribe method takes an ActorRef of an arbitrary actor and a callback function to be called
  when an event matching the given prefixes is received. In the example below, we only provide the callback
  argument value. You could also provide an ActorRef of some actor that should receive the Event message.
 <p>
 <pre> <code>
  // Called when an event is received
  static IEventService.EventHandler eventHandler = ev -&gt; eventReceived = logger.info("Listener received event: " + ev);

  EventMonitor monitor = eventService.subscribe(Optional.empty(), Optional.of(eventHandler), prefix);
 </code> </pre>
 <p>
  <strong>Example Event Subscriber Actor</strong>
 <p>
  In the example below, a we create an actor that will receive Event messages that match the
  prefixes (prefix1, prefix2) in the call to subscribe.
 <p>
  The `JAbstractSubscriber` class uses the values
  in the config file (resources/reference.conf or resources/application.conf) to open a connection
  to the Redis server.
 <p>
 <pre> {@code
  static class MySubscriber extends JAbstractSubscriber {
  private final String prefix1;
  private final String prefix2;

  private final LoggingAdapter log = Logging.getLogger(getContext().system(), this);

  public static Props props(String prefix1, String prefix2) {
  return Props.create(new Creator<MySubscriber>() {
  private static final long serialVersionUID = 1L;</div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../javacsw/services/event_old/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../javacsw/services/loc/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?javacsw/services/events/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
